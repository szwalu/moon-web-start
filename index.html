<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" href="/logo.jpg" />

    <!-- 视口与 iOS 全屏：只保留一套，避免重复 -->
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <title>我abc网址导航：简洁高效的自定义网址导航站</title>
<script src="/env.js"></script>
    <!-- PWA 基础 -->
    <meta name="theme-color" content="#111111" />
    <link rel="manifest" href="/manifest.webmanifest" />

    <!-- 图标 -->
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon-180d.png" sizes="180x180" />
    <link rel="apple-touch-icon" href="/favicon.ico" />
    <link rel="icon" href="/favicon.ico" />
    <link rel="icon" type="image/jpeg" href="/logo.jpg" />

    <meta name="keywords" content="我abc网址导航,网址大全,网址站,网址大全,冷门网站,工具导航,收藏夹" />
    <meta
      name="description"
      content="一款简洁、干净、无广告的浏览器起始页。支持高度自定义布局、多款精美主题和强大的站内搜索功能，帮助您轻松管理常用网站，提升上网效率。"
    />

<!-- ① 首帧内联关键 CSS：先把背景铺好、关掉全局动画/过渡 -->
<style>
  /* 立刻有背景色，避免还未加载 app 样式时的白闪 */
  html, body { background:#e9ecef; }
  /* 暗黑模式用户可用更深色兜底（你也可以改成 #1a1a1a） */
  @media (prefers-color-scheme: dark) {
    html, body { background:#1a1a1a; }
  }
  /* booting/restoring 期间，彻底禁动画/过渡 */
  .booting *, .restoring * { transition:none !important; animation:none !important; }
</style>

<!-- ② 最早标记“booting”，并在 pageshow 后 200ms 自动解除；若是外站返回，先加 restoring -->
<script>
  (function () {
    // 启动即进入 booting（在 Vue 挂载前就生效）
    document.documentElement.classList.add('booting');

    // 记录“将要外跳”
    window.addEventListener('pagehide', function () {
      try { sessionStorage.setItem('__returning_from_external', '1'); } catch {}
    });

    // 回来时：如果是外跳返回，立即进入 restoring（更严的静默）
    window.addEventListener('pageshow', function () {
      try {
        if (sessionStorage.getItem('__returning_from_external') === '1') {
          sessionStorage.removeItem('__returning_from_external');
          document.documentElement.classList.add('restoring');
          setTimeout(function () {
            document.documentElement.classList.remove('restoring');
          }, 200);
        }
      } catch {}
      // 无论如何，200ms 后解除 booting
      setTimeout(function () {
        document.documentElement.classList.remove('booting');
      }, 200);
      // 打个时间戳，供 main.ts 的“强刷守卫”参考
      try { sessionStorage.setItem('__last_pageshow_ts', String(Date.now())); } catch {}
    });
  })();
</script>

    <!-- 首屏视口兜底：把可见高度写入 --vh，配合 CSS 使用 calc(var(--vh) * 100) -->
    <script>
      (function setVH() {
        var h = (window.visualViewport ? visualViewport.height : window.innerHeight) * 0.01;
        document.documentElement.style.setProperty('--vh', h + 'px');
      })();
      window.addEventListener('resize', function () {
        var h = (window.visualViewport ? visualViewport.height : window.innerHeight) * 0.01;
        document.documentElement.style.setProperty('--vh', h + 'px');
      });
      window.addEventListener('orientationchange', function () {
        var h = (window.visualViewport ? visualViewport.height : window.innerHeight) * 0.01;
        document.documentElement.style.setProperty('--vh', h + 'px');
      });
    </script>
  </head>
  <body>
    <div id="app"></div>
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>